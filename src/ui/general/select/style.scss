@use "src/styles/scss/token" as token;
@use "sass:color";

.select {
  position: relative;
  display: inline-flex;
  flex-direction: column;
  width: 100%;
  gap: token.$spacing_xs;
  font-family: token.$font_family_primary;

  &_label {
    @include token.text_sm;
    font-weight: token.$font_weight_medium;
    color: token.$color_text_primary;
  }

  &_control {
    width: 100%;
    display: inline-flex;
    align-items: center;
    justify-content: space-between;
    gap: token.$spacing_sm;
    cursor: pointer;
    color: token.$color_text_primary;
    background: token.$color_background;
    border-radius: token.$radius_md;
    transition:
            border-color token.$transition_base,
            box-shadow token.$transition_base,
            background token.$transition_base;
    @include token.text_base;

    &:disabled,
    &.is_disabled {
      cursor: not-allowed;
      opacity: 0.7;
      background: token.$color_background_secondary;
      color: token.$color_text_tertiary;
    }
  }

  &_variant_outline {
    border: 1px solid token.$color_border;

    &:hover:not(.is_disabled) {
      border-color: token.$color_border_light;
    }

    &.is_open {
      border-color: token.$color_primary;
      box-shadow: 0 0 0 3px rgba(token.$color_primary, 0.15);
    }
  }

  &_variant_filled {
    background: token.$color_background_secondary;
    border: 1px solid transparent;

    &:hover:not(.is_disabled) {
      background: color.mix(
                      token.$color_background,
                      token.$color_background_secondary,
                      70%
      );
    }

    &.is_open {
      background: token.$color_background;
      border-color: token.$color_primary;
      box-shadow: 0 0 0 3px rgba(token.$color_primary, 0.15);
    }
  }

  &_variant_ghost {
    background: transparent;
    border: 1px solid transparent;

    &:hover:not(.is_disabled) {
      background: rgba(0, 0, 0, 0.03);
    }

    &.is_open {
      background: token.$color_background;
      border-color: token.$color_primary;
      box-shadow: 0 0 0 3px rgba(token.$color_primary, 0.15);
    }
  }

  &_size_sm {
    padding: token.$spacing_sm token.$spacing_lg;
    @include token.text_sm;
  }

  &_size_md {
    padding: token.$spacing_md token.$spacing_xl;
    @include token.text_base;
  }

  &_size_lg {
    padding: token.$spacing_lg token.$spacing_2xl;
    @include token.text_md;
  }

  &_value {
    flex: 1 1 auto;
    min-width: 0;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    text-align: start;
    @include token.body_regular;
  }

  &_placeholder {
    flex: 1 1 auto;
    min-width: 0;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    text-align: start;
    @include token.body_regular;
    color: token.$color_text_tertiary;
  }

  &_icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    color: token.$color_text_secondary;
  }

  &_list {
    position: absolute;
    z-index: token.$z_modal;
    top: 100%;
    left: 0;
    width: 100%;
    min-width: 100%;
    box-sizing: border-box;

    margin-top: token.$spacing_xs;

    background: token.$color_background;
    border: 1px solid token.$color_border;
    border-radius: token.$radius_md;
    box-shadow: token.$shadow_md;

    max-height: 18rem;
    overflow-y: auto;
    overflow-x: hidden;
    padding: token.$spacing_xs 0;
  }

  &_option {
    width: 100%;
    box-sizing: border-box;
    display: grid;
    grid-template-columns: 1fr auto;
    align-items: center;
    gap: token.$spacing_sm;
    padding: token.$spacing_sm token.$spacing_lg;
    cursor: pointer;
    color: token.$color_text_primary;
    background: transparent;
    @include token.body_regular;

    > span:first-child {
      min-width: 0;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    &:hover,
    &.is_active {
      background: token.$color_background_secondary;
    }

    &.is_selected {
      font-weight: token.$font_weight_medium;
    }

    &.is_disabled {
      cursor: not-allowed;
      color: token.$color_text_tertiary;
    }
  }
}
